{"ast":null,"code":"var _jsxFileName = \"/home/muhammad/Documents/react-rc/src/components/loginpage/index.jsx\";\nimport React, { Component } from 'react';\nimport { FormGroup, Label, Col, Input, Button, Form } from 'reactstrap';\nimport AppHeader from '../common/AppHeader';\nimport store from 'store';\nimport { Redirect } from 'react-router-dom';\nimport isLoggedIn from '../helpers/is_logged_in';\nimport axios from 'axios';\n\nclass LoginPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChecked = () => {\n      this.setState({\n        check: !this.state.check,\n        hidden: !this.state.hidden\n      });\n    };\n\n    this.state = this.state = {\n      userEmail: \"\",\n      userPassword: \"\",\n      check: false,\n      hidden: true\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    axios.defaults.baseUrl = 'http://localhost:3000'.post(\"/login\", {\n      // .post(\"/api/login\", {\n      userEmail: this.state.userEmail,\n      userPassword: this.state.userPassword\n    }).then(response => {\n      // console.log(response, \"the response\");\n      if (response.status === 200) {\n        localStorage.setItem('JWT_TOKEN', response.data.token);\n        store.set('loggedIn', true);\n        alert('Anda berhasil masuk. Selamat Datang di Monggovestplus');\n        const token = localStorage.getItem('JWT_TOKEN');\n        const tokenParts = token.split('.');\n        const encodedPayload = tokenParts[1];\n        const rawPayload = atob(encodedPayload);\n        const user = JSON.parse(rawPayload);\n        localStorage.setItem('USER_ID', user.userId); // console.log('userId yang login', localStorage.getItem('USER_ID'))\n\n        this.props.toggle();\n        this.props.checkAuth();\n      }\n    }).catch(function (error) {\n      console.log(\"the error\", error);\n\n      if (error.response.status === 401) {\n        alert(\"Akun Anda belum teraktivasi, silahkan cek e-mail yang telah didaftarkan sebelumnya\");\n      } else {\n        alert(\"telah terjadi error, mohon hubungi tim kami untuk mendapat bantuan\", error.response.status);\n      }\n    });\n    this.setState({\n      userEmail: \"\",\n      userPassword: \"\"\n    });\n  } //   onSignInBasic(e) {\n  //     e.preventDefault();\n  //     const { username, password } = this.state;\n  //    const { history } = this.props;\n  //     this.setState({ error: false });\n  //     if (!(username === 'naufal' && password === 'waduh')) {\n  //         return this.setState({ error: true });\n  //     }\n  //     store.set('loggedIn', true);\n  //     history.push('/');\n  // }\n\n\n  handleChange(e) {\n    let name = e.target.name;\n    let value = e.target.value; // console.log(name, value);\n\n    let data = {};\n    data[name] = value;\n    this.setState(data);\n  }\n\n  render() {\n    if (isLoggedIn()) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(AppHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"LOGIN\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Form, {\n      align: \"stretch\",\n      onSubmit: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Email:\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"text\",\n      name: \"userEmail\",\n      value: this.state.userEmail,\n      onChange: this.handleChange,\n      placeholder: \"Masukkan Email Anda\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    })), React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Password: \"), React.createElement(Input, {\n      type: this.state.hidden ? \"password\" : \"text\",\n      required: \"required\",\n      name: \"userPassword\",\n      value: this.state.userPassword,\n      placeholder: \"Kata Sandi Anda\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(Label, {\n      check: true,\n      sm: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"checkbox\",\n      checked: this.state.check,\n      onChange: this.handleChecked,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), \"lihat kata sandi\"))), React.createElement(\"div\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"submit\",\n      value: \"Submit\",\n      className: \"btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"MASUK\"), \" \"))));\n  }\n\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/home/muhammad/Documents/react-rc/src/components/loginpage/index.jsx"],"names":["React","Component","FormGroup","Label","Col","Input","Button","Form","AppHeader","store","Redirect","isLoggedIn","axios","LoginPage","constructor","props","handleChecked","setState","check","state","hidden","userEmail","userPassword","handleChange","bind","onSubmit","e","preventDefault","defaults","baseUrl","post","then","response","status","localStorage","setItem","data","token","set","alert","getItem","tokenParts","split","encodedPayload","rawPayload","atob","user","JSON","parse","userId","toggle","checkAuth","catch","error","console","log","name","target","value","render","submit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { FormGroup, Label, Col, Input, Button, Form } from 'reactstrap';\nimport AppHeader from '../common/AppHeader';\nimport store from 'store';\nimport { Redirect } from 'react-router-dom';\nimport isLoggedIn from '../helpers/is_logged_in';\nimport axios from 'axios'\n\nclass LoginPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state =  this.state = {\n            userEmail: \"\",\n            userPassword: \"\",\n            check: false,\n            hidden: true\n          };\n    \n        this.handleChange = this.handleChange.bind(this);\n      \n        this.onSubmit = this.onSubmit.bind(this);\n\n      }\n      onSubmit(e) {\n        e.preventDefault();\n        axios.defaults.baseUrl = 'http://localhost:3000'\n          .post(\"/login\", {\n          // .post(\"/api/login\", {\n            userEmail: this.state.userEmail,\n            userPassword: this.state.userPassword\n          })\n          .then((response) => {\n            // console.log(response, \"the response\");\n            if (response.status === 200) {\n              localStorage.setItem('JWT_TOKEN', response.data.token)\n              store.set('loggedIn', true);\n              alert('Anda berhasil masuk. Selamat Datang di Monggovestplus');\n              const token = localStorage.getItem('JWT_TOKEN')\n              const tokenParts = token.split('.');\n              const encodedPayload = tokenParts[1];\n              const rawPayload = atob(encodedPayload);\n              const user = JSON.parse(rawPayload);\n              localStorage.setItem('USER_ID', user.userId)\n              // console.log('userId yang login', localStorage.getItem('USER_ID'))\n              this.props.toggle()\n              this.props.checkAuth()\n            }\n          })\n          .catch(function (error) {\n            console.log(\"the error\", error);\n            if (error.response.status === 401) {\n              alert(\"Akun Anda belum teraktivasi, silahkan cek e-mail yang telah didaftarkan sebelumnya\");\n            } else {\n              alert(\"telah terjadi error, mohon hubungi tim kami untuk mendapat bantuan\", error.response.status);\n            }\n          });\n        this.setState({\n          userEmail: \"\",\n          userPassword: \"\"\n        })\n    \n      }\n    \n    //   onSignInBasic(e) {\n    //     e.preventDefault();\n\n    //     const { username, password } = this.state;\n    //    const { history } = this.props;\n\n    //     this.setState({ error: false });\n\n    //     if (!(username === 'naufal' && password === 'waduh')) {\n    //         return this.setState({ error: true });\n    //     }\n    \n    //     store.set('loggedIn', true);\n    //     history.push('/');\n    // }\n    \n    handleChange(e) {\n        let name = e.target.name;\n        let value = e.target.value;\n        // console.log(name, value);\n        let data = {};\n        data[name] = value;\n        this.setState(data);\n      }\n    \n      handleChecked = () => {\n        this.setState({\n          check: !this.state.check,\n          hidden: !this.state.hidden\n        });\n      }\n    \n    render() {\n        \n       \n        if (isLoggedIn()) {\n            return <Redirect to=\"/\" />;\n        }\n        return (\n            <div>\n                <AppHeader />\n                <h1>LOGIN</h1>\n                <div>\n                <Form align=\"stretch\" onSubmit={this.submit}>\n            <FormGroup>\n              Email:<br />\n              <Input type=\"text\" name=\"userEmail\" value={this.state.userEmail} onChange={this.handleChange} placeholder=\"Masukkan Email Anda\" />\n            </FormGroup>\n            <FormGroup>\n              <Label>Password: </Label>\n              <Input type={this.state.hidden ? \"password\" : \"text\"} required=\"required\" name=\"userPassword\" value={this.state.userPassword} placeholder=\"Kata Sandi Anda\" onChange={this.handleChange}\n              />\n              <Label check sm={12}>\n                <Col sm={12}>\n                  <Input type=\"checkbox\" checked={this.state.check} onChange={this.handleChecked} />lihat kata sandi\n                </Col>\n              </Label>\n            </FormGroup>\n\n            <div align=\"center\">\n              <Button color=\"submit\" value=\"Submit\" className=\"btn-primary\">MASUK</Button>{\" \"}\n            </div>\n          </Form>\n                </div>\n\n            </div>\n        );\n    }\n}\n\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}