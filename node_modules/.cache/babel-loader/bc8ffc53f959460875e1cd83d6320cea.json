{"ast":null,"code":"var _jsxFileName = \"/home/muhammad/Documents/react-rc/src/components/loginpage/index.jsx\";\nimport React, { Component } from 'react';\nimport { FormGroup, Label, Col, Input, Button, Form, NavLink } from 'reactstrap';\nimport AppHeader from '../common/AppHeader';\nimport store from 'store';\nimport { Redirect, Link } from 'react-router-dom';\nimport isLoggedIn from '../helpers/is_logged_in';\nimport axios from 'axios';\naxios.defaults.baseUrl = 'https://historic-acadia-33199.herokuapp.com';\n\nclass LoginPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChecked = () => {\n      this.setState({\n        check: !this.state.check,\n        hidden: !this.state.hidden\n      });\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      check: false,\n      hidden: true\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChecked = this.handleChecked.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    axios.post(\"https://historic-acadia-33199.herokuapp.com/api/user/login\", {\n      username: this.state.username,\n      password: this.state.password\n    }).then(res => {\n      console.log(res);\n      store.set('loggedIn', true);\n      alert(res.data.message);\n      localStorage.setItem('JWT_TOKEN', res.data.token);\n      const token = localStorage.getItem('JWT_TOKEN'); // const tokenParts = token.split('.');\n      // const encodedPayload = tokenParts[1];\n      // const rawPayload = atob(encodedPayload);\n      // const user = JSON.parse(rawPayload);\n\n      console.log('userId yang login', token);\n      this.props.history.push('/'); // this.props.toggle()\n      //this.props.checkAuth()             \n\n      const _id = localStorage.getItem('USER_ID');\n\n      localStorage.setItem('USER_ID', res.data.id);\n      console.log(_id);\n    }).catch(function (err) {\n      //console.log(res.data.message);\n      alert(\"email atau password anda salah\");\n    });\n    this.setState({\n      username: \"\",\n      password: \"\"\n    });\n  }\n\n  handleChange(e) {\n    let name = e.target.name;\n    let value = e.target.value;\n    let data = {};\n    data[name] = value;\n    this.setState(data);\n  }\n\n  oke() {\n    if (isLoggedIn()) axios.get(\"https://historic-acadia-33199.herokuapp.com/api/user/\".concat(localStorage.getItem('USER_ID'))).then(res => {\n      this.setState({\n        items: res.data.data\n      });\n    }).catch(err => {\n      console.log(err);\n      alert(err);\n    });\n  }\n\n  render() {\n    if (this.state.oke()) {\n      return React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(AppHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"LOGIN\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(Form, {\n      align: \"stretch\",\n      onSubmit: this.submit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Email:\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(Input, {\n      type: \"text\",\n      name: \"username\",\n      value: this.state.username,\n      onChange: this.handleChange,\n      placeholder: \"Masukkan Email Anda\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    })), React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Password: \"), React.createElement(Input, {\n      type: this.state.hidden ? \"password\" : \"text\",\n      required: \"required\",\n      name: \"password\",\n      value: this.state.password,\n      placeholder: \"Kata Sandi Anda\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(Label, {\n      check: true,\n      sm: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"checkbox\",\n      checked: this.state.check,\n      onChange: this.handleChecked,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), \"lihat kata sandi\"))), React.createElement(\"div\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.onSubmit,\n      color: \"submit\",\n      className: \"btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"MASUK\"), \" \"), React.createElement(\"div\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/register\",\n      className: \"text-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Belum Punya Akun? Skuy SignUp\"))))));\n  }\n\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/home/muhammad/Documents/react-rc/src/components/loginpage/index.jsx"],"names":["React","Component","FormGroup","Label","Col","Input","Button","Form","NavLink","AppHeader","store","Redirect","Link","isLoggedIn","axios","defaults","baseUrl","LoginPage","constructor","props","handleChecked","setState","check","state","hidden","username","password","handleChange","bind","onSubmit","e","preventDefault","post","then","res","console","log","set","alert","data","message","localStorage","setItem","token","getItem","history","push","_id","id","catch","err","name","target","value","oke","get","items","render","submit"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { FormGroup, Label, Col, Input, Button, Form, NavLink } from 'reactstrap';\nimport AppHeader from '../common/AppHeader';\nimport store from 'store';\nimport { Redirect, Link } from 'react-router-dom';\nimport isLoggedIn from '../helpers/is_logged_in';\nimport axios from 'axios'\n\naxios.defaults.baseUrl = 'https://historic-acadia-33199.herokuapp.com'\n\n\nclass LoginPage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: \"\",\n            password: \"\",\n            check: false,\n            hidden: true\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n\n        this.handleChecked = this.handleChecked.bind(this);\n\n        this.onSubmit = this.onSubmit.bind(this)\n    }\n\n    onSubmit(e) {\n        e.preventDefault();\n        axios\n        .post(\"https://historic-acadia-33199.herokuapp.com/api/user/login\", {\n                username: this.state.username,\n                password: this.state.password\n            })\n        \n            \n            .then((res) => {\n                console.log(res)                    \n                    store.set('loggedIn', true);\n                     alert(res.data.message);\n                    localStorage.setItem('JWT_TOKEN', res.data.token)\n                    const token = localStorage.getItem('JWT_TOKEN')\n                    // const tokenParts = token.split('.');\n                    // const encodedPayload = tokenParts[1];\n                    // const rawPayload = atob(encodedPayload);\n                    // const user = JSON.parse(rawPayload);\n                    console.log('userId yang login', token)\n                    this.props.history.push('/')\n                    // this.props.toggle()\n                    //this.props.checkAuth()             \n                    const _id = localStorage.getItem('USER_ID')\n                    \n                        localStorage.setItem('USER_ID', res.data.id)\n                      console.log(_id) \n\n            })\n         \n            \n            \n            .catch(function (err) {\n                //console.log(res.data.message);\n                alert(\"email atau password anda salah\");\n              });\n        this.setState({\n            username: \"\",\n            password: \"\"\n        })\n        \n    }\n\n    handleChange(e) {\n        let name = e.target.name;\n        let value = e.target.value;\n        let data = {};\n        data[name] = value;\n        this.setState(data);\n    }\n\n    handleChecked = () => {\n        this.setState({\n            check: !this.state.check,\n            hidden: !this.state.hidden\n        });\n    }\n    oke()   {  if (isLoggedIn())\n        axios.get(`https://historic-acadia-33199.herokuapp.com/api/user/${localStorage.getItem('USER_ID')}`\n        )\n            .then(res => {\n                this.setState({\n                  items: res.data.data\n    \n                  \n                })\n              }).catch(err => {\n                console.log(err)\n                alert(err)\n                \n            });\n          } \n\n    render() {\n        \n\n        if (this.state.oke()) {\n            \n            return <Redirect to=\"/\" />;\n        }\n        \n        return (\n            <div>\n                <AppHeader />\n                <h1>LOGIN</h1>\n                <div>\n                    <Form align=\"stretch\" onSubmit={this.submit}>\n                        <FormGroup>\n                            Email:<br />\n                            <Input type=\"text\" name=\"username\" value={this.state.username} onChange={this.handleChange} placeholder=\"Masukkan Email Anda\" />\n                        </FormGroup>\n                        <FormGroup>\n                            <Label>Password: </Label>\n                            <Input type={this.state.hidden ? \"password\" : \"text\"} required=\"required\" name=\"password\" value={this.state.password} placeholder=\"Kata Sandi Anda\" onChange={this.handleChange}\n                            />\n                            <Label check sm={12}>\n                                <Col sm={12}>\n                                    <Input type=\"checkbox\" checked={this.state.check} onChange={this.handleChecked} />lihat kata sandi\n                </Col>\n                            </Label>\n                        </FormGroup>\n\n                        <div align=\"center\">\n                            <Button  onClick={this.onSubmit}  color=\"submit\" className=\"btn-primary\">MASUK</Button>{\" \"}\n                        </div>\n                        <div align=\"center\">\n                            \n                            <NavLink ><Link to='/register'className=\"text-info\">Belum Punya Akun? Skuy SignUp</Link></NavLink>\n\n                        </div>\n                    </Form>\n                </div>\n\n            </div>\n        );\n    }\n}\n\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}